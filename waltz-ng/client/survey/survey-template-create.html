<!--
  ~ Waltz - Enterprise Architecture
  ~ Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project
  ~ See README.md for more information
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific
  ~
  -->

<div>
    <waltz-page-header icon="wpforms"
                       name="Survey Template"
                       small="Create">
        <breadcrumbs>
            <ol class="waltz-breadcrumbs">
                <li><a ui-sref="main">Home</a></li>
                <li><a ui-sref="main.survey.instance.user">Survey</a></li>
                <li><a ui-sref="main.survey.template.list">Templates</a></li>
                <li>Create</li>
            </ol>
        </breadcrumbs>
    </waltz-page-header>

    <div class="waltz-page-summary waltz-page-summary-attach">
        <form name="surveyTemplateForm"
              class="waltz-survey-form form-horizontal"
              role="form"
              novalidate>

            <div class="form-group">
                <label for="name"
                       class="col-sm-2 control-label">
                    Name <span class="text-danger">*</span>
                </label>
                <div class="col-sm-10">
                    <input class="form-control form-control-warning"
                           required
                           id="name"
                           placeholder="Name for this template"
                           ng-model="ctrl.surveyTemplate.name" />
                </div>
            </div>

            <div class="form-group">
                <label for="targetEntityKind"
                       class="col-sm-2 control-label">
                    External Id
                </label>
                <div class="col-sm-10">
                    <input class="form-control form-control-warning"
                           id="externalId"
                           placeholder="External identifier for this template"
                           ng-model="ctrl.surveyTemplate.externalId" />
                    <p class="help-block">
                        External identifiers can be used to simplify reading/writing data programmatically.
                    </p>
                </div>
            </div>

            <div class="form-group">
                <label for="description"
                       class="col-sm-2 control-label">
                    Description
                </label>
                <div class="col-sm-10">
                    <textarea id="description"
                              class="form-control"
                              placeholder="Description for this template"
                              ng-model="ctrl.surveyTemplate.description"
                              rows="4">
                    </textarea>
                    <p class="help-block">
                        Supports markdown formatted text
                    </p>
                </div>
            </div>

            <div class="form-group">
                <label for="targetEntityKind"
                       class="col-sm-2 control-label">
                    Target Kind <span class="text-danger">*</span>
                </label>
                <div class="col-sm-10">
                    <select id="targetEntityKind"
                            required
                            class="form-control"
                            ng-options="kind.value as kind.name for kind in ctrl.targetEntityKinds"
                            ng-model="ctrl.surveyTemplate.targetEntityKind">
                    </select>
                    <p class="help-block">
                        The type of entity this survey can be issued against, either APPLICATION or CHANGE_INITIATIVE
                    </p>
                </div>
            </div>

            <div class="form-group">
                <label for="issuanceRole"
                       class="col-sm-2 control-label">
                    Issuance Role
                </label>
                <div class="col-sm-10">
                    <input class="form-control form-control-warning"
                           id="issuanceRole"
                           placeholder="Restricts who can issue this template"
                           ng-model="ctrl.surveyTemplate.issuanceRole" />
                    <div class="help-block">
                        Restricts who can issue this template.  Only users which have this role can:
                        <ul>
                            <li>Self issue this survey</li>
                            <li>Bulk issue this survey via a run (if they also have SURVEY_RUN_ADMIN)</li>
                        </ul>
                        To prevent any users from issuing this survey, assign a non-existent or role with no assigned users.
                        This is often used when the survey will be issued programmatically via a job.
                    </div>
                </div>
            </div>


            <div class="form-group" style="padding-top: 10px">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="button"
                            ng-if="!(surveyTemplateForm.$invalid)"
                            ng-click="ctrl.onSubmit()"
                            class="btn btn-success">
                        Create
                    </button>
                    <span ng-if="surveyTemplateForm.$invalid"
                          class="alert alert-warning"
                          style="padding-bottom: 10px;">
                    Please fill in all required fields
                </span>
                </div>
            </div>
        </form>
    </div>

    <br>
</div>

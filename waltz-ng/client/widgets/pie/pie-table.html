<!--
  ~ Waltz - Enterprise Architecture
  ~ Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project
  ~ See README.md for more information
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific
  ~
  -->

<div class="pie-table">
    <div ng-switch="$ctrl.renderMode">
        <div ng-switch-when="frameless">
            <h4>
                <span ng-bind="$ctrl.name"></span>
            </h4>
            <p class="help-text">
                <waltz-markdown text="$ctrl.description"></waltz-markdown>
            </p>

            <div ng-include="'wpt-pie-and-table'"></div>
        </div>
        <div ng-switch-default>
            <waltz-basic-info-tile name="{{ $ctrl.name }}"
                                   sub-name="{{ $ctrl.subName }}"
                                   description="{{ $ctrl.description }}"
                                   icon="{{ $ctrl.icon }}">
                <div ng-include="'wpt-pie-and-table'"></div>
            </waltz-basic-info-tile>
        </div>
    </div>



</div>


<script type="text/ng-template"
        id="wpt-pie-and-table">
    <div align="center">
        <div>
            <waltz-pie data="$ctrl.pieData"
                       style="display: inline-block; vertical-align: top; padding-right: 24px;"
                       selected-segment-key="$ctrl.selectedSegmentKey"
                       config="$ctrl.pieConfig">
            </waltz-pie>
        </div>
        <div class="table-responsive">
            <waltz-pie-segment-table data="$ctrl.tableData"
                                     style="display: inline-block"
                                     selected-segment-key="$ctrl.selectedSegmentKey"
                                     config="$ctrl.tableConfig">
            </waltz-pie-segment-table>
        </div>
    </div>
</script>
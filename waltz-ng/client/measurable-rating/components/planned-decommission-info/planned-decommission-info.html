<!--
  ~ Waltz - Enterprise Architecture
  ~ Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project
  ~ See README.md for more information
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific
  ~
  -->

<div class="waltz-replacement-apps">
    <div class="col-sm-12 " ng-if="$ctrl.plannedDecommission">
        <hr>

        <div ng-if="!$ctrl.plannedDecommission.isValid">
            <waltz-warning>
                <message>Invalid decommission date</message>
                <content>
                    <span>The set decommission date is after the planned retirement date for this application:</span>
                    <strong ng-bind="$ctrl.application.plannedRetirementDate | date:'yyyy-MM-dd'"></strong>
                </content>
            </waltz-warning>
        </div>
        <br>
        <div ng-if="$ctrl.replacementApps.length === 0">
            <waltz-icon name="hand-paper-o">
            </waltz-icon>
            This item will be <b>decommissioned without any replacement</b> applications.
            The planned decommission date is:
            <b ng-bind="$ctrl.plannedDecommission.plannedDecommissionDate | date:'yyyy-MM-dd'"></b>
        </div>

        <div ng-if="$ctrl.replacementApps.length > 0">
            <waltz-icon name="hand-o-right">
            </waltz-icon>
            This feature will be <b>replaced</b> by the following application/s.
            The planned decommission date is:
            <b ng-bind="$ctrl.plannedDecommission.plannedDecommissionDate | date:'yyyy-MM-dd'"></b>

            <br>
            The replacement application/s for this item are:
            <br>
            <br>
            <table class="table table-condensed table-hover small">
                <colgroup>
                    <col width="33%">
                    <col width="33%">
                    <col width="33%">
                </colgroup>
                <thead>
                <th>Name</th>
                <th>Commission Date</th>
                <th>Last Updated By</th>
                </thead>
                <tbody>
                <tr ng-repeat="item in $ctrl.replacementApps">
                    <td>
                        <waltz-entity-link entity-ref="item.entityReference">
                        </waltz-entity-link>
                    </td>
                    <td>
                    <span ng-bind="item.plannedCommissionDate | date:'yyyy-MM-dd'">
                    </span>
                    </td>
                    <td>
                        <waltz-last-updated entity="item">
                        </waltz-last-updated>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>


    <div class="col-sm-12" ng-if="$ctrl.replacingDecommissions.length > 0">
        <hr>

        <div>

            <waltz-icon name="handshake-o"></waltz-icon>
            This application is <b>taking over</b> from the following
            apps which are <b>due</b> to decommission this feature.

            <br>
            <br>

            <table class="table table-condensed table-hover small"
                   style="padding-top: 6px;">
                <colgroup>
                    <col width="33%">
                    <col width="33%">
                    <col width="33%">
                </colgroup>
                <thead>
                <th>Name</th>
                <th>Decommission Date</th>
                <th>Last Updated By</th>
                </thead>
                <tbody>
                <tr ng-repeat="item in $ctrl.replacingDecommissions">
                    <td>
                        <waltz-entity-link entity-ref="item.measurableRating.entityReference">
                        </waltz-entity-link>
                    </td>
                    <td>
                        <span ng-bind="item.decommission.plannedDecommissionDate | date:'yyyy-MM-dd'">
                        </span>
                    </td>
                    <td>
                        <waltz-last-updated entity="item.decommission">
                        </waltz-last-updated>
                    </td>
                </tr>
                </tbody>
            </table>
        </di>
    </div>
</div>
